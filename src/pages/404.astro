---
import Layout from '../layouts/Layout.astro';

const base = import.meta.env.BASE_URL;
const defaultLocale = 'en';

const defaultLocale404Path = `${base}/${defaultLocale}/404/`;
const defaultLocaleHomepagePath = `${base}/${defaultLocale}/`;

---
<Layout title="Page Not Found - Redirecting...">
  <head>
    <meta http-equiv="refresh" content={`0; url=${defaultLocale404Path}`}>
    <link rel="canonical" href={defaultLocale404Path}>
    <script type="text/javascript">
      const target404URL = new URL(String(window.location.origin) + '<Fragment Astro.props={defaultLocale404Path}/>').href;
      const targetHomepageURL = new URL(String(window.location.origin) + '<Fragment Astro.props={defaultLocaleHomepagePath}/>').href;
      
      window.location.replace(target404URL);
    </script>
  </head>
  <body>
    <div style="text-align: center; padding: 50px;">
      <h1>404 - Page Not Found</h1>
      <p>We couldn't find the page you were looking for.</p>
      <p>
        Redirecting you to the
        <a href={defaultLocale404Path}>English 404 page</a> or the
        <a href={defaultLocaleHomepagePath}>English homepage</a>.
      </p>
      <p>
        If you are not redirected automatically, please click one of the links above.
      </p>
    </div>
  </body>
</Layout>
<style>
  head { display: none; }
</style>
