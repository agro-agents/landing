---
import { getLocaleFromUrl, useTranslations } from "../i18n/utils";
import Button from "./Button.astro";

const locale = getLocaleFromUrl(Astro.url);
const t      = useTranslations(locale);


const baseURL = import.meta.env.DEV
  ? "http://localhost:5002"
  : "https://agro-agents-demo.onrender.com";

const dashURL = locale === "es"
  ? `${baseURL}/es`
  : baseURL;


---
<section id="dashboard" class="dashboard">
  <div class="container">

    <div class="dashboard-frame">
      <iframe
        src={dashURL}
        title="Interactive data dashboard"
        loading="lazy"
        allowfullscreen
      ></iframe>
    </div>

    <div class="dashboard-cta">
        <Button
        href={dashURL}
        variant="primary"
        size ="large"
      >
        Open App
      </Button>
      </div>

  </div>
</section>

<style>
    .dashboard {
      display: flex;
      flex-direction: column;
      height: 200vh;
      padding: 0;
    }
  
    .dashboard > .container {
      display: flex;
      flex-direction: column;
      flex: 1;  
    }
  

    .dashboard .section-heading {
      margin-bottom: 1rem; 
    }
  
    .dashboard-frame {
      flex: 1;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 5px 20px rgba(0,0,0,0.05);
    }
    .dashboard-cta {
  margin-top: 1.5rem;
  display: flex;
  justify-content: center;  /* ‚Üê centers the button */
}
  

    .dashboard-frame iframe {
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
    }
</style>
  